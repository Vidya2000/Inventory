<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
</head>
<body>
    <h2>üõ†Ô∏è Admin Dashboard</h2>
    <a href="{{ url_for('home') }}">Home</a> | 
    <a href="{{ url_for('logout') }}">Logout</a>
    <br><br>

    <h3>Add Product</h3>
    <form action="{{ url_for('add') }}" method="post">
        <input type="text" name="id" placeholder="Product ID" required>
        <input type="text" name="name" placeholder="Product Name" required>
        <input type="number" name="price" step="0.01" placeholder="Price" required>
        <input type="number" name="stock" step="1" placeholder="Stock" required>
        <button type="submit">Add</button>
    </form>

    <h3>All Products</h3>
    <table border="1" cellpadding="5">
        <tr><th>ID</th><th>Name</th><th>Price</th><th>Stock</th><th>Actions</th></tr>
        {% for p in products %}
        <tr>
            <form action="{{ url_for('update', pid=p[0]) }}" method="post">
                <td>{{p[0]}}</td>
                <td><input type="text" name="name" value="{{p[1]}}"></td>
                <td><input type="number" step="0.01" name="price" value="{{p[2]}}"></td>
                <td><input type="number" step="1" name="stock" value="{{p[3]}}"></td>
                <td>
                    <button type="submit">Update</button>
                    <a href="{{ url_for('delete', pid=p[0]) }}">Delete</a>
                </td>
            </form>
        </tr>
        {% endfor %}
    </table>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
        {% for category, msg in messages %}
          <li><b>{{ category.title() }}:</b> {{ msg }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
</body>
</html>
